(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2480:function(){},6385:function(e,t,s){Promise.resolve().then(s.bind(s,336))},336:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var l=s(3827);s(6496),s(1219),s(4220),s(6820);var n=s(4090),a=s(6723),r=s.n(a);let i=(0,n.forwardRef)((e,t)=>{let{zvalues:s,onChanage:a,onLoad:i,className:o="",listClassName:d="",prefix:u="",zvalue:f}=e,h=(0,n.useRef)(),m=t||h,g=(0,n.useRef)(),[v,x]=(0,n.useState)([]),[p,b]=(0,n.useState)(-1);function j(e){e.preventDefault();let{clientX:t,clientY:s}=e.touches[0];if(!function(e,t){let{left:s,width:l}=t.getBoundingClientRect();return e>s&&e<=s+l}(t,m.current)||!c(s,m.current)){!function(e){let t=new Touch({identifier:Date.now(),target:document,clientX:0,clientY:0,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5}),s=new TouchEvent("touchend",{touches:[t],targetTouches:[t],changedTouches:[t],bubbles:!0,cancelable:!0});e.dispatchEvent(s)}(g.current);return}let l=Array.from(g.current.querySelectorAll("li")),n=l.find(e=>c(s,e));if(v.forEach(e=>e.className=""),n){y(n),n.classList.add(r()["zval-selected"]);let e=[n],t=n.nextSibling;for(let s=1;t&&s<=3;s++,t=t.nextSibling)t.classList.add(r()["zval-selected-a-".concat(s)]),e.push(t);t=n.previousSibling;for(let s=1;t&&s<=3;s++,t=t.previousSibling)t.classList.add(r()["zval-selected-b-".concat(s)]),e.push(t);x(e);let s=l.indexOf(n);0===s?g.current.style.top="0":s===l.length-1?(g.current.style.top="auto",g.current.style.bottom="0"):g.current.style.top="-1rem"}}function y(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=e.attributes["data-index"].value;t&&a&&a({index:l,value:s[l]}),b(l)}return(0,n.useEffect)(()=>{i&&i("loaded")},[]),(0,n.useEffect)(()=>{},[f]),(0,n.useEffect)(()=>{let e=m.current;return e.addEventListener("touchmove",j,{passive:!1}),()=>{e.removeEventListener("touchmove",j)}},[v]),(0,l.jsx)("div",{ref:m,className:"relative grow ".concat(o),onTouchEnd:function(e){v.forEach(e=>e.className=""),x([]),g.current.style.top="0"},children:(0,l.jsxs)("div",{className:r()["zval-container-inner"],children:["\xa0",(0,l.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 overflow-hidden",children:(0,l.jsx)("ul",{ref:g,className:"flex flex-col font-bold divide-y divide-slate-200 ".concat(d),children:s.map((e,t)=>(0,l.jsxs)("li",{"data-index":t,onClick:e=>y(e.target),"data-isselected":t==p,children:[u,e]},t))})})]})})});function c(e,t){let{top:s,height:l}=t.getBoundingClientRect();return e>s&&e<=s+l}i.displayName="ZList";var o=s(2151),d=s.n(o);function u(e){return"_".concat(e,"_timestamp")}function f(e,t){localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(u(e),d()().toISOString())}function h(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=null;let a=localStorage.getItem(e);if(!l&&a){let t=localStorage.getItem(u(e));console.log(e,t,d()().diff(t,"seconds"),a),t&&d()().diff(t,"seconds")<s&&(n=JSON.parse(a))}return null!==n?"function"==typeof t?new Promise((e,t)=>e(n)):n:t?"function"==typeof t?t().then(t=>(f(e,t),t)):(f(e,t),t):void 0}var m=s(8710),g=s(389),v=s(4111),x=s(6285),p=s(3302);function b(e){let{setOpen:t,label:s,id:n,disabled:a,InputProps:{ref:r}={},inputProps:{"aria-label":i}={}}=e;return(0,l.jsx)(x.Z,{variant:"outlined",id:n,disabled:a,ref:r,"aria-label":i,size:"small",onClick:()=>null==t?void 0:t(e=>!e),children:s?"".concat(s):"Pick a date"})}function j(e){let[t,s]=n.useState(!1);return(0,l.jsx)(p.M,{slots:{field:b,...e.slots},slotProps:{field:{setOpen:s},toolbar:{toolbarFormat:e.format}},...e,format:"DD, MMM, YYYY",open:t,onClose:()=>s(!1),onOpen:()=>s(!0)})}function y(e){let{value:t,setValue:s,format:a="DD MMM, YYYY"}=e,[r,i]=(0,n.useState)(t);return(0,l.jsx)(j,{label:null==t?null:t.format(a),value:t,onChange:e=>i(e),onAccept:e=>s&&r&&s(r),format:a})}function N(e){let{showError:t=e=>{},setProcessing:s=e=>{},showSplashscreen:a,essentialsUrl:r}=e,c=(0,n.useRef)(),[o,u]=(0,n.useState)([0]),[v,p]=(0,n.useState)(0),[b,j]=(0,n.useState)(100),[N,z]=(0,n.useState)(0),[_,w]=(0,n.useState)([]),[C,Z]=(0,n.useState)(null),[L,E]=(0,n.useState)(d()()),[k,A]=(0,n.useState)(!0),[P,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{0===_.length&&h("spending-types",()=>fetch(r).then(e=>e.json()).then(e=>(console.log("loaded spending types from server"),e.spendingTypes))).then(e=>{w(e),A(!1),a(!1)}).catch(e=>{t("Unable to load spending types")}),Z(h("spending-type",C)),z(h("amount",N))},[]),(0,n.useEffect)(()=>{let e=[...o],t=e[e.length-1];for(let s=0;s<v;s++)e.push(t+=b);u(e)},[v,k]);let M=(0,n.useCallback)(()=>{if(c.current){let e=c.current.offsetHeight,t=c.current.querySelector("li").offsetHeight+1,s=Math.floor(e/t);p(s),console.log("sizing",e,t,s)}});return P?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen bg-white text-black",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center grow",children:[(0,l.jsx)("div",{className:"h-20"}),(0,l.jsx)(m.Z,{variant:"h4",fontWeight:700,children:"Thank You !"}),(0,l.jsx)(x.Z,{className:"pt-5",onClick:e=>{T(!1)},children:"Submit Again"}),(0,l.jsx)("div",{className:"grow"}),(0,l.jsx)("iframe",{width:"376",height:"277",seamless:!0,src:"https://docs.google.com/spreadsheets/d/e/2PACX-1vQj1ca59uRg_hhybWX8G6S6jjsqKu9e-L4LHLxhaPfNzpE2n6BDB78NS8asqgMUFo7SLlKz3btgi04A/pubchart?oid=1946067004&format=interactive"}),(0,l.jsx)("div",{className:"h-20"})]}),(0,l.jsx)(m.Z,{variant:"caption",className:"p-5",children:"Made by Afzal"})]})}):k?(0,l.jsx)(l.Fragment,{children:"Loading ..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-end p-4 border-b-2 border-blue-500",children:[(0,l.jsx)("div",{className:"grow",children:(0,l.jsx)(y,{value:L,setValue:E})}),(0,l.jsx)(x.Z,{size:"small",variant:"outlined",onClick:function(){s(!0);let e=JSON.stringify({spendingType:C,amount:N,date:L.toISOString()});console.log(L.format("DD/MM/yyyy"),e),fetch(r,{method:"POST",body:e}).then(e=>{if(!e.ok)throw console.log("failed"),Error(e);return e.json()}).then(e=>{f("amount",N),f("spending-type",C),console.log(e)}).catch(e=>{console.log(e)}).finally(()=>{T(!0),s(!1)})},children:"OK"})]}),(0,l.jsxs)("div",{className:"essentials-feed pb-2 flex flex-row items-stretch flex-grow text-black",children:[(0,l.jsxs)("div",{className:"w-1/2 flex flex-col",children:[(0,l.jsx)(i,{zvalues:_,className:"bg-slate-100",listClassName:"text-left",zvalue:C,onChanage:e=>{let{value:t}=e;return Z(t)}}),(0,l.jsx)("div",{className:"p-4 border-t-2 border-blue-500 pr-2 text-right",children:(0,l.jsx)(g.Z,{label:"Spending Type",size:"small",value:C||"",onChange:e=>{e.target.value}})})]}),(0,l.jsxs)("div",{className:"w-1/2 flex flex-col",children:[(0,l.jsx)(i,{ref:c,zvalues:o,className:"bg-slate-100",listClassName:"text-center",zvalue:N,onChanage:e=>{let{value:t}=e;return z(t)},onLoad:M}),(0,l.jsx)(S,{zval:N,onChanage:e=>z(e.target.value)})]})]})]})}function S(e){let{zval:t="",onChanage:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"p-4 border-t-2 border-blue-500 pl-2 text-right min-h-16",children:(0,l.jsx)(g.Z,{label:"Amount",size:"small",value:t,onChange:e=>s&&s(e),InputProps:{startAdornment:(0,l.jsx)(v.Z,{position:"start",children:"Rs"})}})})})}s(8028);var z=s(9723),_=s(874),w=s(6910),C=s(5617),Z=s.n(C),L=s(356),E=s(4858),k=JSON.parse('{"url":"U2FsdGVkX19UD2pmV/V4okysvEV4euc4HbPCjFNiYlW0RBd7CWCfy3W9q+dydX5r3Owl13Rh0xqHmk5BdVWg6YAspgOyyIcvJvanNq8VyUlt0db6AUssJWsHypImiLVq/T2ZisC8Q4u3zXa3YAuNR/yHqhMeHNbLXSvm1+3XtgvNPiNXrm1essxU1AYM/Rxp","updatedTimestamp":"2024-02-21T20:17:09.046Z"}');function A(){let[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{h("essentials-url",async()=>(function(){let e="".concat(window.prompt("Password"));console.log("keyInfo: ",k);let t=Z().AES.decrypt(k.url,e).toString(Z().enc.Utf8);return console.log("essentialsUrl: ",t),t})(),2592e3,k.updatedTimestamp!==h("essentials-url-recorded-timestamp")).then(e=>{f("essentials-url-recorded-timestamp",k.updatedTimestamp),o(e)})},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(L._,{dateAdapter:E.Q,children:[e&&(0,l.jsx)("div",{className:"fixed flex h-full w-full justify-center z-50 items-center bg-slate-100 bg-opacity-50",children:(0,l.jsx)(z.Z,{severity:"error",className:"grow m-10",children:e})}),(0,l.jsx)(_.Z,{open:s,style:{zIndex:1e3},children:(0,l.jsx)(w.Z,{})}),r&&(0,l.jsxs)("div",{className:"fixed flex flex-col justify-center items-center h-screen bg-white text-black",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center grow",children:[(0,l.jsx)(m.Z,{variant:"h4",fontWeight:700,children:"Essentials Tracker"}),(0,l.jsx)("img",{alt:"Splashscreen",src:"splashscreen.png"})]}),(0,l.jsx)(m.Z,{variant:"caption",className:"p-5",children:"Made by Afzal"})]}),c&&(0,l.jsx)("main",{className:"w-full h-screen bg-white flex flex-col justify-between text-black",children:(0,l.jsx)(N,{showError:function(e){t(e),window.setTimeout(()=>t(null),3e3)},setProcessing:a,showSplashscreen:i,essentialsUrl:c})})]})})}!function(){if(/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform)){var e;null===(e=document.querySelector("body"))||void 0===e||e.classList.add("iphone-body")}}()},6723:function(e){e.exports={"zval-container-inner":"ZList_zval-container-inner__aeZWr","zval-selected":"ZList_zval-selected__JeT7D","zval-selected-b-1":"ZList_zval-selected-b-1__OWF2X","zval-selected-a-1":"ZList_zval-selected-a-1__cr9a3","zval-selected-b-2":"ZList_zval-selected-b-2___NyGC","zval-selected-a-2":"ZList_zval-selected-a-2__81RP1","zval-selected-b-3":"ZList_zval-selected-b-3__Az91J","zval-selected-a-3":"ZList_zval-selected-a-3__CU2nb"}}},function(e){e.O(0,[990,212,971,69,744],function(){return e(e.s=6385)}),_N_E=e.O()}]);